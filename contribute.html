<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Contribute - slwy</title>
    <link href="https://fonts.googleapis.com/css2?family=Noto+Serif:ital,wght@0,100;0,200;0,300;0,400;0,700;1,100;1,200;1,300;1,400;1,700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css">
    <link rel="stylesheet" href="css/style.css">
</head>
<body>
    <!-- Navigation Header -->
    <header>
        <nav>
            <h1><a href="index.html">slwy</a></h1>
            <ul>
                <li><a href="index.html">Home</a></li>
                <li><a href="music.html">Music</a></li>
                <li><a href="food.html">Food</a></li>
                <li><a href="chill.html">Chill</a></li>
                <li><a href="contribute.html" class="active">Contribute</a></li>
            </ul>
        </nav>
    </header>

    <main class="page-content">
        <!-- Page Header -->
        <section class="page-header">
            <h1>Contribute</h1>
            <p>slwy is built by our community, for our community. Join us in creating something beautiful together through food, performance, and shared experiences.</p>
        </section>

        <!-- Volunteer for Food Prep Section -->
        <section id="volunteer" class="content-section">
            <div class="content-wrapper">
                <div class="text-content">
                    <h2>Join Our Food Prep Team</h2>
                    <p>Be part of the magic behind the scenes! Our youth food prep team, headed by Shyan, creates delicious meals with love and care. Whether you're an experienced cook or just eager to learn, we welcome you to join our kitchen crew and help bring nourishing food to our community.</p>
                    <div style="margin-top: 2rem;">
                        <a href="#volunteer-form" class="btn">Join Us</a>
                    </div>
                </div>
                <div class="media-content">
                    <div class="photo-carousel">
                        <div class="photo-slide active">
                            <img src="images/foodprep1.jpg" alt="foodprep dishes">
                        </div>
                        <div class="photo-slide">
                            <img src="images/foodprep2.jpg" alt="Family recipes">
                        </div>
                        <div class="photo-slide">
                            <img src="images/foodprep3.jpg" alt="Cooking with love">
                        </div>
                    </div>
                    <!-- <video autoplay muted loop playsinline>
                        <source src="videos/food-prep-team.mp4" type="video/mp4">
                        <source src="videos/food-prep-team.webm" type="video/webm">
                        Your browser does not support the video tag.
                    </video> -->
                </div>
            </div>
        </section>

        <!-- Bring Homemade Food Section -->
        <section class="content-section">
            <div class="content-wrapper">
                <div class="media-content">
                    <div class="photo-carousel">
                        <div class="photo-slide active">
                            <img src="images/homemade1.jpg" alt="Homemade dishes">
                        </div>
                        <div class="photo-slide">
                            <img src="images/homemade2.jpg" alt="Family recipes">
                        </div>
                        <div class="photo-slide">
                            <img src="images/homemade3.jpg" alt="Cooking with love">
                        </div>
                    </div>
                </div>
                <div class="text-content">
                    <h2>Share Your Homemade Creations</h2>
                    <p>Bring a dish that tells your story! We welcome homemade food that reflects your heritage, creativity, or favorite family recipes. Please note: only homemade dishes are acceptedâ€”no purchased items. Your contribution adds to the tapestry of flavors that makes our gathering special.</p>
                    <div style="margin-top: 2rem;">
                        <a href="#food-form" class="btn">Share Your Dish</a>
                    </div>
                </div>
            </div>
        </section>

        <!-- Drinks Bar Contribution Section -->
        <section class="content-section">
            <div class="content-wrapper">
                <div class="text-content">
                    <h2>Support Our Drinks Bar</h2>
                    <p>Contribute $5 and receive a drinks ticket that you can exchange for your choice of matcha, coffee, or kombucha at our artisanal drinks bar. Your contribution helps us provide quality beverages and supports the overall experience for everyone.</p>
                    <div style="margin-top: 2rem;">
                        <a href="#drinks-form" class="btn">Get Your Drinks Ticket</a>
                    </div>
                </div>
                <div class="media-content">
                    <div class="photo-carousel">
                        <div class="photo-slide active">
                            <img src="images/matcha.jpg" alt="Matcha preparation">
                        </div>
                        <div class="photo-slide">
                            <img src="images/coffee.jpg" alt="Coffee brewing">
                        </div>
                        <div class="photo-slide">
                            <img src="images/kombucha.jpg" alt="Kombucha selection">
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- Performance Section -->
        <section class="content-section">
            <div class="content-wrapper">
                <div class="media-content">
                    <div class="photo-carousel">
                        <div class="photo-slide active">
                            <img src="images/performance1.jpg" alt="Matcha preparation">
                        </div>
                        <div class="photo-slide">
                            <img src="images/performance2.jpg" alt="Coffee brewing">
                        </div>
                        <div class="photo-slide">
                            <img src="images/performance3.jpg" alt="Kombucha selection">
                        </div>
                    </div>
                </div>
                <div class="text-content">
                    <h2>Share Your Performance</h2>
                    <p>Have a song to sing, an instrument to play, or a story to tell? We'd love to have you perform at slwy! Once you express interest, we'll reach out to discuss details like the number of songs, instruments needed, and how we can best support your performance.</p>
                    <div style="margin-top: 2rem;">
                        <a href="#performance-form" class="btn">Perform With Us</a>
                    </div>
                </div>
            </div>
        </section>

        <!-- Contribution Forms Section -->
        <section class="contact-section">
            <h2>How Would You Like to Contribute?</h2>
            <p>choose one or more ways to be part of creating slwy together</p>
            
            <!-- Volunteer Form -->
            <div id="volunteer-form" class="form-section">
                <h3>Volunteer for Food Prep Team</h3>
                <form class="alternating-form contribution-form" data-type="volunteer">
                    <div class="input-group">
                        <input type="text" name="name" placeholder="your name" required>
                    </div>
                    <div class="input-group">
                        <input type="text" name="class" placeholder="your class" required>
                    </div>
                    <div class="input-group">
                        <input type="email" name="email" placeholder="your email" required>
                    </div>
                    <div class="input-group">
                        <textarea name="experience" placeholder="tell us about any cooking experience or why you'd like to join the food prep team" required></textarea>
                    </div>
                    <div class="button-container">
                        <button type="submit">join the team</button>
                    </div>
                </form>
            </div>

            <!-- Food Contribution Form -->
            <div id="food-form" class="form-section">
                <h3>Bring Homemade Food</h3>
                <form class="alternating-form contribution-form" data-type="food">
                    <div class="input-group">
                        <input type="text" name="name" placeholder="your name" required>
                    </div>
                    <div class="input-group">
                        <input type="text" name="class" placeholder="your class" required>
                    </div>
                    <div class="input-group">
                        <input type="email" name="email" placeholder="your email" required>
                    </div>
                    <div class="input-group">
                        <input type="text" name="dish" placeholder="what dish will you bring?" required>
                    </div>
                    <div class="input-group">
                        <textarea name="description" placeholder="tell us about your dish - ingredients, story behind it, serves how many people, etc." required></textarea>
                    </div>
                    <div class="button-container">
                        <button type="submit">share your dish</button>
                    </div>
                </form>
            </div>

            <!-- Drinks Ticket Form -->
            <div id="drinks-form" class="form-section">
                <h3>Get Your Drinks Ticket ($5)</h3>
                <form class="alternating-form contribution-form" data-type="drinks">
                    <div class="input-group">
                        <input type="text" name="name" placeholder="your name" required>
                    </div>
                    <div class="input-group">
                        <input type="text" name="class" placeholder="your class" required>
                    </div>
                    <div class="input-group">
                        <input type="email" name="email" placeholder="your email" required>
                    </div>
                    <div class="input-group">
                        <select name="payment-method" required>
                            <option value="">how would you like to pay?</option>
                            <option value="cash">cash on the day</option>
                            <option value="digital">digital transfer</option>
                        </select>
                    </div>
                    <div class="button-container">
                        <button type="submit">get drinks ticket</button>
                    </div>
                </form>
            </div>

            <!-- Performance Form -->
            <div id="performance-form" class="form-section">
                <h3>Perform at slwy</h3>
                <form class="alternating-form contribution-form" data-type="performance">
                    <div class="input-group">
                        <input type="text" name="name" placeholder="your name" required>
                    </div>
                    <div class="input-group">
                        <input type="text" name="class" placeholder="your class" required>
                    </div>
                    <div class="input-group">
                        <input type="email" name="email" placeholder="your email" required>
                    </div>
                    <div class="input-group">
                        <input type="text" name="performance-type" placeholder="what would you like to perform? (singing, instrument, spoken word, etc.)" required>
                    </div>
                    <div class="input-group">
                        <textarea name="details" placeholder="tell us more - how many songs/pieces, what instruments do you need, any special requirements, etc." required></textarea>
                    </div>
                    <div class="button-container">
                        <button type="submit">express interest</button>
                    </div>
                </form>
            </div>
        </section>
    </main>

    <footer>
        <p>&copy; 2025 daybyday. All rights reserved.</p>
    </footer>

    <script>
    // Wait for the DOM to be fully loaded
    document.addEventListener('DOMContentLoaded', function() {
        console.log('Contribute page loaded...');
        
        // Photo carousel functionality
        function initPhotoCarousels() {
            const carousels = document.querySelectorAll('.photo-carousel');
            
            carousels.forEach((carousel, carouselIndex) => {
                const slides = carousel.querySelectorAll('.photo-slide');
                let currentSlide = 0;
                
                if (slides.length > 0) {
                    if (carousel.intervalId) {
                        clearInterval(carousel.intervalId);
                    }
                    
                    slides.forEach(slide => slide.classList.remove('active'));
                    slides[0].classList.add('active');
                    
                    function showNextSlide() {
                        slides[currentSlide].classList.remove('active');
                        currentSlide = (currentSlide + 1) % slides.length;
                        slides[currentSlide].classList.add('active');
                    }
                    
                    carousel.intervalId = setInterval(showNextSlide, 3000);
                }
            });
        }
        
        initPhotoCarousels();
        
        // Video optimization
        function optimizeVideoForDevice() {
            const videos = document.querySelectorAll('video');
            
            videos.forEach(video => {
                const observer = new IntersectionObserver((entries) => {
                    entries.forEach(entry => {
                        if (entry.isIntersecting) {
                            video.play().catch(e => console.log('Video play failed:', e));
                        } else {
                            video.pause();
                        }
                    });
                });
                
                observer.observe(video);
            });
        }
        
        optimizeVideoForDevice();
        
        // Handle contribution form submissions
        const contributionForms = document.querySelectorAll('.contribution-form');
        
        contributionForms.forEach(form => {
            form.addEventListener('submit', function(e) {
                e.preventDefault();
                
                const formType = this.getAttribute('data-type');
                const formData = new FormData(this);
                const data = Object.fromEntries(formData);
                
                // Disable submit button
                const submitButton = this.querySelector('button[type="submit"]');
                const originalText = submitButton.textContent;
                submitButton.textContent = 'Submitting...';
                submitButton.disabled = true;
                
                // Add form type to data
                formData.append('ContributionType', formType);
                formData.append('Timestamp', new Date().toLocaleString());
                
                // Same Google Apps Script URL as main form
                const googleAppsScriptURL = 'https://script.google.com/macros/s/AKfycbzBCDXB1eYydwmks1-WnarvZVRsyKhNRhgcUd3B1TRvrGmIsS1K_nB73OZdF6WEYrRC/exec';
                
                fetch(googleAppsScriptURL, {
                    method: 'POST',
                    body: formData
                })
                .then(response => response.text())
                .then(data => {
                    const parsedData = JSON.parse(data);
                    
                    if (parsedData.status === 'success') {
                        let message = `Thank you, ${formData.get('name')}! `;
                        
                        switch(formType) {
                            case 'volunteer':
                                message += 'Your application to join the food prep team has been received. Shyan will be in touch with you soon!';
                                break;
                            case 'food':
                                message += 'Your homemade dish contribution has been registered. We can\'t wait to try it!';
                                break;
                            case 'drinks':
                                message += 'Your drinks ticket has been reserved. We\'ll send you payment details shortly.';
                                break;
                            case 'performance':
                                message += 'Your performance interest has been noted. We\'ll reach out to discuss the details with you!';
                                break;
                        }
                        
                        alert(message);
                        this.reset();
                    } else {
                        throw new Error(parsedData.message || 'Submission failed');
                    }
                })
                .catch(error => {
                    console.error('Submission error:', error);
                    alert('There was an error submitting your contribution. Please try again.');
                })
                .finally(() => {
                    submitButton.textContent = originalText;
                    submitButton.disabled = false;
                });
            });
        });
        
        // Header scroll effect
        const header = document.querySelector('header');
        if (header) {
            window.addEventListener('scroll', function() {
                if (window.scrollY > 100) {
                    header.style.backgroundColor = 'rgba(74, 78, 64, 0.95)';
                } else {
                    header.style.backgroundColor = '#4a4e40';
                }
            });
        }
        
        // Handle window resize
        let resizeTimeout;
        window.addEventListener('resize', function() {
            clearTimeout(resizeTimeout);
            resizeTimeout = setTimeout(function() {
                optimizeVideoForDevice();
                initPhotoCarousels();
            }, 500);
        });
    });
    </script>
</body>
</html>